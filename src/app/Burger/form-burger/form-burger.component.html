<div class="container">
  <h2>Ajouter un Burger</h2>
  <form [formGroup]="burgerForm" (ngSubmit)="addBurger()">
    
    <!-- Libellé -->
    <div class="form-group">
      <label for="name">Libellé</label>
      <input type="text" id="name" formControlName="name" class="form-control" placeholder="Nom du burger">
      <div *ngIf="burgerForm.get('name')?.invalid && (burgerForm.get('name')?.dirty || burgerForm.get('name')?.touched)" class="text-danger">
        <small *ngIf="burgerForm.get('name')?.errors?.['required']">Le nom est requis.</small>
        <small *ngIf="burgerForm.get('name')?.errors?.['minlength']">Le nom doit comporter au moins 2 caractères.</small>
        <small *ngIf="burgerForm.get('name')?.errors?.['maxlength']">Le nom ne peut pas dépasser 255 caractères.</small>
      </div>
    </div>

    <!-- Prix -->
    <div class="form-group">
      <label for="price">Prix</label>
      <input type="text" id="price" formControlName="price" class="form-control" placeholder="Prix du burger">
      <div *ngIf="burgerForm.get('price')?.invalid && (burgerForm.get('price')?.dirty || burgerForm.get('price')?.touched)" class="text-danger">
        <small *ngIf="burgerForm.get('price')?.errors?.['required']">Le prix est requis.</small>
        <small *ngIf="burgerForm.get('price')?.errors?.['min']">Le prix doit être au moins 1.</small>
        <small *ngIf="burgerForm.get('price')?.errors?.['pattern']">Le prix doit être un nombre valide.</small>
      </div>
    </div>

    <!-- Description -->
    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description" formControlName="description" class="form-control" placeholder="Description du burger"></textarea>
      <div *ngIf="burgerForm.get('description')?.invalid && (burgerForm.get('description')?.dirty || burgerForm.get('description')?.touched)" class="text-danger">
        <small *ngIf="burgerForm.get('description')?.errors?.['maxlength']">La description ne peut pas dépasser 1000 caractères.</small>
      </div>
    </div>

      <!-- Image -->
    <div class="form-group">
      <label for="image">Image (jpg, jpeg, png max 2MB)</label>
      <input id="image" type="file" (change)="onFileSelected($event)" class="form-control" formControlName="image" accept=".jpg, .jpeg, .png" />
      <div *ngIf="burgerForm.get('image')?.invalid && (burgerForm.get('image')?.dirty || burgerForm.get('image')?.touched)" class="text-danger">
        <small *ngIf="burgerForm.get('image')?.errors?.['invalidExtension']">L'image doit être au format jpg, jpeg ou png.</small>
        <small *ngIf="burgerForm.get('image')?.errors?.['maxSizeExceeded']">L'image ne doit pas dépasser 2MB.</small>
      </div>

      
    </div>

    <div class="mt-2">
      <img [src]="imagePreview" alt="Image Preview" *ngIf="imagePreview" style="max-width: 200px; max-height: 200px; object-fit: cover;">
    </div>

    <div class="button-group">
      <button type="submit" class="btn btn-primary" [disabled]="burgerForm.invalid">Ajouter</button>
      <button type="reset" class="btn btn-primary" [disabled]="burgerForm.invalid">Annuler</button>
    </div>
  </form>
</div>
